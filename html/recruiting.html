<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"/>
  <meta name="renderer" content="webkit"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <link rel="stylesheet" href="../css/acdors.css">
  <link rel="icon" href="/favicon.ico">
  <!--Bootstrap 3.3.7 -->
  <link href="../plugin/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <!--Swiper.js 2.7.6-->
  <link rel="stylesheet" href="../plugin/swiper.js/2.7.6/css/idangerous.swiper.css">
  <!--custom styles-->
  <link rel="stylesheet" href="../css/acdors.css">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="../plugin/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="../plugin/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <title>星榜戏逗 - 剧组招募</title>
</head>
<body>

  <!-------------------------------- 活动轮播图 -------------------------------->
  <div id="event-slides" class="main-carousel">
    <div class="swiper-container">
      <div class="swiper-wrapper">
      </div>
    </div>
    <div class="pagination"></div>
  </div>

  <!-------------------------------- 热剧推荐 -------------------------------->
  <div id="hot-recommend" class="container">
    <div class="row">
      <div class="sec-caption col-xs-12">
        <p>热剧推荐</p>
        <div class="padding"></div>
      </div>
    </div>
    <div id="img-tba"></div>
  </div> <!-- #hot-recommend -->

  <!-------------------------------- 各种插件 -------------------------------->
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!--(for debugging only)-->
  <script src="../plugin/jquery/1.12.4/jquery.min.js"></script>
  <!-- swiper.js 2.7.6 (for debuggin only) -->
  <script src="../plugin/swiper.js/2.7.6/js/idangerous.swiper.min.js"></script>
  <!--<script src="../js/carousels.js"></script>-->
  <!--Bootstrap 3.3.37 javascript file (for debugging only)-->
  <script src="../plugin/bootstrap/3.3.7/js/bootstrap.min.js"></script>


  <!-------------------------------- 自定义js -------------------------------->
  <script src="../js/acdors.js"></script>
  <script>
    $(function () {
      //创建页面公共组件
      createCommonComponents(2);

      // 请求活动大轮播图
      ajaxGet({
        url: domainUrl + 'web/banner',
        data: {banner_area: 3},
        success: function(data){
          getBannerSlides(data, '#event-slides');
        } // success
      }); // ajaxGet()

      //请求推荐剧组信息
      ajaxGet({
        url: domainUrl + 'web/drama',
        success: function (data) {
          var isnull = data.isnull;

          // 请求推荐剧组数据
          if(isnull) { //后台没有上传剧组数据，展示"敬请期待"图片
            showTBA('#hot-recommend');
          }
          else { //请求到了剧组数据
            data = data.data;

            // 剧组招募 - 剧组图片与简单剧组信息,带查看详情链接
            getIntroBlk(data, '#hot-recommend', true);

             // 剧故事梗概
            // var $story = '<div class="simple-text">' +
            //     '<h4>故事梗概：</h4>' +
            //     '<p>' + data.crew.introduction + '</p>' +
            //   '</div>';
            // $('#hot-recommend').append($story);
            getStory(data, '#hot-recommend');

            if(data.actor[0].information != "") { //如果没有返回演员的数据，就完全不展示轮播图

              /* ================================
                           剧组明星轮播图
                 ================================ */

              // 明星图片轮播图
              var $recommendSlideWrapper = '<div id="recommend-slides" class="intro-carousel">' +
                '<div class="carousel-wrapper">' +
                '<a href="#" class="arrow-left"></a>' +
                '<a href="#" class="arrow-right"></a>' +
                '<div class="swiper-container">' +
                '<div class="swiper-wrapper">' +
                '</div>' +
                '</div>' +
                '</div>' +
                '</div>';
              $('#hot-recommend').append($recommendSlideWrapper);
              for(var i=0,length=data.actor.length; i<length; ++i ) {
                var $actorSlide = '<div class="swiper-slide">' +
                  '<img src="' + ossUrl + data.actor[i].avatar + '" alt="明星轮播图">' +
                  '</div>';
                $('#recommend-slides .swiper-wrapper').append($actorSlide);
              }

              // 明星介绍轮播文本
              var $actorInfoSlideWrapper = '<div id="actor-info-slides" class="intro-text-carousel">' +
                '<div class="swiper-container">' +
                '<div class="swiper-wrapper">' +
                '</div>' +
                '</div>' +
                '</div>';
              $('#hot-recommend').append($actorInfoSlideWrapper);
              for(var i=0,length=data.actor.length; i<length; ++i) {
                var $actorInfoSlide = '<div class="swiper-slide">' +
                  '<table class="profile-info">' +
                  '<thead>' +
                  '<tr><th colspan="2"><h3>' + data.actor[i].name + '</h3></th></tr>' +
                  '</thead>' +
                  '<tbody>' +
                  '<tr>' +
                  '<th>饰演：</th>' +
                  '<td>' + data.actor[i].role + '</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<th>作品：</th>' +
                  '<td>' + data.actor[i].experiment + '</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<th>简介：</th>' +
                  '<td>' + data.actor[i].information + '</td>' +
                  '</tr>' +
                  '</tbody>' +
                  '</table>' +
                  '</div>';
                $('#actor-info-slides .swiper-wrapper').append($actorInfoSlide);
              } // for

              // 明星图片swiperjs配置
              var recommendSlides = $('#recommend-slides .swiper-container').swiper({
                // loop: true,
                // autoplay: 2000,
                grabCursor: true,
                slidesPerView: 3,
                autoplayDisableOnInteraction: true,
                centeredSlides: true,
                onSlideChangeStart: function () {
                  updateHotInfo(recommendSlides.activeIndex);
                }
              });
              $('#recommend-slides .arrow-left').on('click', function (e) {
                e.preventDefault();
                recommendSlides.swipePrev();
              });
              $('#recommend-slides .arrow-right').on('click', function (e) {
                e.preventDefault();
                recommendSlides.swipeNext();
              });

              // 明星介绍轮播文本 swiperjs 配置
              var actorInfoSlides = $('#actor-info-slides .swiper-container').swiper({
                autoplay: 2000,
                slidesPerView: 1,
                centeredSlides: true,
                autoplayDisableOnInteraction: true,
                grabCursor: true,
                onSlideChangeStart: function () {
                  recommendSlides.swipeTo(actorInfoSlides.activeIndex, 400, false);
                }
              });

              function updateHotInfo(index) {
                actorInfoSlides.swipeTo(index, 400, false);
              }
            } // if(data.actor[0].information != "")


          } // else 请求到了剧组数据
        } // success
      }); //$.ajax 请求剧组信息


    }); // $(function(){})
  </script>
</body>
</html>




































































































