<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"/>
  <meta name="renderer" content="webkit"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
  <link rel="icon" href="/favicon.ico">
  <link href="../plugin/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../plugin/swiper.js/2.7.6/css/idangerous.swiper.css">
  <link rel="stylesheet" href="../css/acdors.css">
  <!--[if lt IE 9]>
  <script src="../plugin/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="../plugin/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <title>星榜戏逗 - 师资介绍</title>
</head>
<body>

  <!-------------------------------- 师资轮播图 -------------------------------->
  <div id="teacher-slides" class="intro-carousel">
    <!--此wrapper非彼wrapper，是自定义的wrapper-->
    <div class="carousel-wrapper">
      <a href="#" class="arrow-left-white"></a>
      <a href="#" class="arrow-right-white"></a>
      <div class="swiper-container">
        <div class="swiper-wrapper">
        </div> <!-- .swiper-wrapper -->
      </div> <!-- .swiper-container -->
      <!--<div class="pagination"></div>-->
    </div> <!-- .carousel-wrapper -->
  </div> <!-- #teacher-slides -->

  <!--------------------------- 师资轮播图对应的老师介绍 --------------------------->
  <div id="teacher-info-slides" class="intro-text-carousel">
    <div class="swiper-container">
      <div class="swiper-wrapper">
      </div> <!-- .swiper-wrapper -->
    </div> <!-- .swiper-container -->
  </div> <!-- #teacher-info-slides -->

  <!-------------------------------- 各种插件 -------------------------------->
  <script src="../plugin/jquery/1.12.4/jquery.min.js"></script>
  <script src="../plugin/swiper.js/2.7.6/js/idangerous.swiper.min.js"></script>
  <script src="../plugin/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!-------------------------------- 自定义javascript -------------------------------->
  <script src="../js/acdors.js"></script>
  <script>
    $(function () {
      //创建页面公共组件
      createCommonComponents(4);

      // 请求老师图片
      ajaxGet({
        url: domainUrl + 'web/teacher',
        success: function (data) {
          data = data.data;

          for(var i=0,length=data.length; i<length; ++i) {
            // 请求每个老师的图片
            var $teacherSlide = '<div class="swiper-slide">' +
                '<img src="' + ossUrl + data[i].avatar + '" alt="师资轮播图">' +
              '</div>';
            $('#teacher-slides .swiper-wrapper').append($teacherSlide);

            // 请求对应老师的信息
            getSlideText(data[i], '#teacher-info-slides');
          } // for

          // 师资轮播图 swiperjs 配置
          var tsAutoplayFrequence = 6000;
          var tsSpeed = 800;
          var teacherSlides = $('#teacher-slides .swiper-container').swiper({
            autoplay: tsAutoplayFrequence,
            speed: tsSpeed,
            autoplayDisableOnInteraction: true,
            grabCursor: true,
            slidesPerView: 3,
            centeredSlides: true,
            watchActiveIndex: true,
            onSlideChangeStart: function () {
              updateTeacherInfo(teacherSlides.activeLoopIndex);
            },
            onTouchEnd: function(){
              teacherSlides.swipeNext();
            }
          });
          $('#teacher-slides .arrow-left-white').on('click', function(e){
            e.preventDefault();
            teacherSlides.swipePrev();
          });

          $('#teacher-slides .arrow-right-white').on('click', function(e){
            e.preventDefault();
            teacherSlides.swipeNext();
          });

          // 老师介绍 swiperjs 配置
          var teacherInfoSlides = $('#teacher-info-slides .swiper-container').swiper({
            autoplay: tsAutoplayFrequence,
            speed: tsSpeed,
            autoplayDisableOnInteraction: true,
            slidesPerView: 1,
            centeredSlides: true,
            grabCursor: true,
            onSlideChangeStart: function(){ //teacherInfo和teachersCarousel互相控制
              teacherSlides.swipeTo(teacherInfoSlides.activeLoopIndex, tsSpeed, false);
            },
          });

          function updateTeacherInfo(index) {
            teacherInfoSlides.swipeTo(index, tsSpeed, false);
          }

        }
      });
    });
  </script>
</body>
</html>
