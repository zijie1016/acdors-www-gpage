<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"/>
  <meta name="renderer" content="webkit"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="../plugin/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="../plugin/swiper.js/2.7.6/css/idangerous.swiper.css">
  <link rel="stylesheet" href="css/share.css">
  <title>星榜戏逗 - 你，绝对有戏</title>
</head>
<body>

  <script src="../plugin/jquery/1.12.4/jquery.min.js"></script>
  <script src="../plugin/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="../plugin/swiper.js/2.7.6/js/idangerous.swiper.min.js"></script>
  <script src="../js/global.js"></script>
  <script src="js/share.js"></script>
  <script>
    $(function () {
      var uid = GetQueryString('uid');
      var did = GetQueryString('did');
      var topicid = GetQueryString('topic_id');
      var activityid = GetQueryString('activity_id');
      
      // 视频分享页
      if(ready(did)){ 
        //构建基本页面
        buildVidShare(); 
        //请求数据
        ajaxGetShare({
          pageType: 'video',
          data: {uid: uid, cid: did},
          success: function(data){
            var ossUrl = data.ossUrl;
            var data = data.videoinfo;

            $('#likes').append(data.like_count);  //点赞数
            $('#comments').append(data.comment_count); //评论数
            $('#profile-pic').append('<img src="' + ossUrl +  data.avatar + '" alt="头像">'); //用户头像
            $('#author-name').append(data.nickname); //用户名
            $('#video-info').append(data.video_info); //视频介绍

            //视频资源
            var $video = '<video id="vid" src="' + data.video_src +
              '" webkit-playsinline="true"' +
              ' playsinline="true"' +
              ' x5-video-player-type="h5"' +
              ' x5-video-orientation="portraint"' +
              ' x5-video-player-fullscreen="false"' +
              ' poster="' + data.image_src + '" ' +
              ' controls="controls"></video>';
            $('#vid-wrapper').append($video);

            // 点击.touchable UI后跳转（官网或app下载页）
            addModalEvent({class: '.touchable', id: '#modal'});
          } // success()
        }); // ajaxGetShare
      } // if(视频分享)

      // 话题分享页
      else if(ready(topicid)){ 
        ajaxGetShare({
          pageType: 'topic',
          data: {uid: uid, cid: topicid},
          success: function(data){
            //构建页面
            buildTopicShare(data); 
            // 点击.touchable UI后跳转（官网或app下载页）
            addModalEvent({class: '.touchable', id: '#modal'});
          } // success()
        }); // ajaxGetShare()
      } // else if(话题分享)

      // 活动分享页
      else if(ready(activityid)){ 
        ajaxGetShare({
          pageType: 'activity',
          data: {uid: uid, cid: activityid},
          success: function(data){
            //构建页面
            buildActivityShare(data.activity); 
            addModalEvent({class: '.touchable', id: '#modal'});
          } // success()
        }); // ajaxGetShare()
      }// else if(活动分享)

   
    }); // $(function())
  </script>

</body>
</html>