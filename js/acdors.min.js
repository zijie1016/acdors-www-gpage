function buildIndex(){_ui.buildMain(),buildCommon()}function buildCrewDetail(){_ui.buildCrewDetail(),buildCommon()}function buildCrewList(){_ui.buildCrewList(),buildCommon()}function buildJoinUs(){_ui.buildJoinUs(),buildCommon()}function buildTeachers(){_ui.buildTeachers(),buildCommon()}function buildCommon(){_ui.buildNavbar(),_ui.buildFooter()}var _ui={buildNavbar:function(){_data.getNavbar(function(e){$(".wrapper").prepend(e)}),_ctl.scrollWatch({target:"nav",showClass:"show",hideClass:"hidden"})},buildFooter:function(){_data.getFooter(function(e){$(".wrapper").append(e)})},buildMain:function(){_ctl.setParallax(".top"),_ctl.setParallax("#soli-intro-text"),_ctl.setParallax("#soli-intro-imgs"),_data.getBanner(function(e){$(".banner .swiper-wrapper").append(_ui._buildSwiperSlides({type:"banner",data:e})),_ctl.bannerSwiper=_ctl.setSwiper(".banner .swiper-container",{speed:600,loop:!0,slidesPerView:1,autoplay:{delay:4e3},centeredSlides:!0,grabCursor:!0,disableOnInteraction:!1,pagination:{el:".swiper-pagination",clickable:!0}})}),_data.getSoliIntro(function(e){$("#soli-intro-content").append(e.data.content)}),_data.getDramas(function(e){_ui._buildCrewBrief({container:".crew",crewinfo:e.data[0].crewinfo})}),_data.getPartners(function(e){$(".partner-info .swiper-wrapper").append(_ui._buildSwiperSlides({type:"partner-info",data:e})),$(".partner-logo .swiper-wrapper").append(_ui._buildSwiperSlides({type:"partner-logo",data:e})),_ctl.partnerLogoSwiper=_ctl.setSwiper(".partner-logo",{slidesPerView:"auto",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0}),_ctl.partnerInfoSwiper=_ctl.setSwiper(".partner-info",{autoplay:{delay:5e3},slidesPerView:"auto",autoHeight:!0,effect:"fade",fadeEffect:{crossFade:!0},thumbs:{swiper:_ctl.partnerLogoSwiper}})}),_data.getTeachers(function(e){$(".teacher-img .swiper-wrapper").append(_ui._buildSwiperSlides({type:"teacher-img",data:e})),$(".teacher-info .swiper-wrapper").append(_ui._buildSwiperSlides({type:"teacher-info",data:e})),_ctl.teacherInfoSwiper=_ctl.setSwiper(".teacher-info",{slidesPerView:1,effect:"fade",autoHeight:!0,fadeEffect:{crossFade:!0}}),_ctl.teacherImgSwiper=_ctl.setSwiper(".teacher-img",{autoplay:{delay:5e3,disableOnInteraction:!0},slidesPerView:"auto",loop:!0,slideToClickedSlide:!0,watchSlidesProgress:!0,watchSlidesVisibility:!0,thumbs:{swiper:_ctl.teacherInfoSwiper}})}),_data.getJoinUs(function(e){(e=e.data).length;for(var t="#join-us > div > div:nth-child(",i=0;i<3;++i)$(t+(i+2)+") > div > div p:nth-child(1)").append(e[i].title),$(t+(i+2)+") > div > div p:nth-child(2)").append(_ctl.getTime({timestamp:e[i].createtime,format:"yyyy-mm-dd"})),$(t+(i+2)+") > div > div div").append(e[i].content)})},buildCrewDetail:function(){var e=_ctl.getQueryString("id");_data.getCrewDetailById(e,function(e){var t,i=e.crewinfo,a=e.creatorlist,r=e.castlist,n=e.crew_album,o=a.length,d=r.length,l=n.length;_ui._buildCrewBrief({crewinfo:i,container:".crew-detail"}),$(".synopsis p:last-child").append(i.introduction),_data.getMediaItem(function(e){for(t=0;t<o;++t)$("#creators").append(e),_ui._buildMediaItem({type:"creator",item:a[t],container:"#creators div:nth-child("+(t+1)+") "});for(t=0;t<d;++t)$("#roles").append(e),_ui._buildMediaItem({type:"role",item:r[t],container:"#roles div:nth-child("+(t+1)+") "})});var s="";for(t=0;t<l;++t)s+='<div><img src="'+_data.ossDomain+n[t].photo+'" alt="剧组相册"></div>';$("#album").append(s)})},buildCrewList:function(){_data.getDramas(function(t){var i,a,r=(t=t.data).length;_data.getCrewItem(function(e){for(i=0;i<r;++i)a="#list div:nth-child("+(i+2)+")",$("#list").append(e),_ui._buildCrewBrief({crewinfo:t[i].crewinfo,container:a}),$(a+" .synopsis p:last-child").append(t[i].crewinfo.introduction),$(a+" a").attr("href","/html/crew-detail.html?id="+i)})})},buildJoinUs:function(){_data.getJoinUs(function(e){var t,i=(e=e.data).length;for(t=0;t<i;++t)$(".join-us").append(_ui._buildRecruitInfo(e[t]))})},buildTeachers:function(){$("iframe").attr("src","/h5/teachers.html?tid="+_ctl.getQueryString("tid"))},_buildSwiperSlide:function(e){var t='<div class="swiper-slide">';switch(e.type){case"banner":if("向能"==e.data.title||"张华"==e.data.title){t+='<a href="html/teachers.html?tid='+["向能","张华"].indexOf(e.data.title)+'">'+this._buildImage({src:_data.ossDomain+e.data.banner,alt:e.data.title})+"</a>";break}t+=this._buildImage({src:_data.ossDomain+e.data.banner,alt:e.data.title});break;case"partner-info":t+="<p>"+e.data.partner_title+"</p><p>"+e.data.partner_info+"</p>";break;case"partner-logo":t+=this._buildImage({src:_data.ossDomain+e.data.partner_src,alt:e.data.partner_title})+"<p>"+e.data.partner_title+"</p>";break;case"teacher-img":t+=this._buildImage({src:_data.ossDomain+e.data.avatar,alt:e.data.name});break;case"teacher-info":t+=this._buildInfoTable(e.data)}return t+"</div>"},_buildSwiperSlides:function(e){var t,i=e.data.data,a=i.length,r="";for(t=0;t<a;++t)r+=this._buildSwiperSlide({type:e.type,data:i[t]});return r},_buildImage:function(e){return'<img src="'+e.src+'" alt="'+e.alt+'">'},_buildCrewBrief:function(e){var t=e.container+" .brief-info ";$(e.container+" .crew-brief img").attr("src",_data.ossDomain+e.crewinfo.crew_picurl),$(t).prepend("<p>"+e.crewinfo.crew_name+"</p>"),$(t+"p:nth-child(2)").append(e.crewinfo.crew_type),$(t+"p:nth-child(3)").append(e.crewinfo.crew_director),$(t+"p:nth-child(4)").append(e.crewinfo.crew_producer),$(t+"p:nth-child(5)").append(e.crewinfo.crew_investor),$(t+"p:nth-child(6)").append(e.crewinfo.crew_bootime),$(t+"p:nth-child(7)").append(e.crewinfo.crew_position)},_buildMediaItem:function(e){var t="<p>"+e.item.name;"creator"==e.type?t+="&nbsp&nbsp"+e.item.title+"</p><p>作品："+e.item.experiment+"</p>":"role"==e.type&&(t+="</p><p>性别："+("1"==e.item.gender?"男":"女")+"</p><p>角色："+e.item.position+"</p><p>性格："+e.item.character+"</p>"),$(e.container+"img").attr("src",_data.ossDomain+e.item.avatar),$(e.container+"div:nth-child(2)").append(t),$(e.container+"td").text(e.item.information)},_buildInfoTable:function(e){var t='<table><thead><tr><td colspan="2">'+e.name+"</td></tr></thead><tbody>";return t+=this._buildInfoTableRow("性别",1==e.gender?"男":"女"),t+=this._buildInfoTableRow("职业",e.profession),t+=this._buildInfoTableRow("饰演",e.role),t+=this._buildInfoTableRow("作品",e.creation),t+=this._buildInfoTableRow("作品",e.experiment),t+=this._buildInfoTableRow("简介",e.content),t+="</tbody></table>"},_buildInfoTableRow:function(e,t){return""!=e&&null!=t&&""!=t?"<tr><th>"+e+"：</th><td>"+t+"</td></tr>":""},_buildRecruitInfo:function(e){return"<div><p>"+e.title+"</p><p>发布时间："+_ctl.getTime({format:"yyyy-mm-dd",timestamp:e.createtime})+"</p><div>"+e.content+"</div></div>"}},_data={getNavbar:function(e){$.get("/components/navbar.html",e)},getFooter:function(e){$.get("/components/footer.html",e)},getMediaItem:function(e){$.get("/components/media-item.html",e)},getCrewItem:function(e){$.get("/components/crew-item.html",e)},getBanner:function(e){$.get(this.apiDomain+this.bannerUrl,this.bannerKV,e)},getSoliIntro:function(e){$.get(this.apiDomain+this.soliIntroUrl,e)},getDramas:function(e){$.get(this.apiDomain+this.dramasUrl,e)},getCrewDetailById:function(t,i){this.getDramas(function(e){i(e.data[t])})},getPartners:function(e){$.get(this.apiDomain+this.partnersUrl,e)},getTeachers:function(e){$.get(this.apiDomain+this.teachersUrl,e)},getJoinUs:function(e){$.get(this.apiDomain+this.joinUsUrl,e)},apiDomain:"/api/",ossDomain:"https://acdors.oss-cn-beijing.aliyuncs.com/",bannerUrl:"web/banner",bannerKV:{banner_area:1},soliIntroUrl:"web/about",dramasUrl:"web/dramas",partnersUrl:"web/partners",teachersUrl:"web/teacher",joinUsUrl:"web/joinUs"},_ctl={bannerSwiper:void 0,partnerInfoSwiper:void 0,partnerLogoSwiper:void 0,teacherImgSwiper:void 0,teacherInfoSwiper:void 0,scrollWatch:function(t){var i=$(window).scrollTop();$(window).scroll(function(){var e=$(window).scrollTop();i<e?50<e-i&&$(t.target).removeClass(t.showClass).addClass(t.hideClass):$(t.target).removeClass(t.hideClass).addClass(t.showClass),i=e})},setParallax:function(e){return new Parallax($(e).get(0))},setSwiper:function(e,t){return new Swiper(e,t)},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?decodeURI(i[2]):null},getTime:function(e){var t,i=new Date(1e3*e.timestamp),a=i.getFullYear(),r=i.getMonth()+1,n=i.getDate(),o=i.getHours(),d=i.getMinutes();switch(e.format){case"mm-dd hh:mm":t=this.addZero(r)+"-"+this.addZero(n)+" "+this.addZero(o)+":"+this.addZero(d);break;case"yyyy-mm-dd":t=a+"-"+this.addZero(r)+"-"+this.addZero(n);break;case"yyyy/mm/dd":t=a+"/"+this.addZero(r)+"/"+this.addZero(n);break;default:t=""}return t},addZero:function(e){return e<10?"0"+e:e}};