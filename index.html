<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"/>
  <meta name="renderer" content="webkit"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <link rel="icon" href="/favicon.ico">
  <link href="../plugin/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./plugin/swiper.js/2.7.6/css/idangerous.swiper.css">
  <link rel="stylesheet" href="./css/acdors.css">
  <!--[if lt IE 9]>
  <script src="./plugin/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="./plugin/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <title>星榜戏逗 - 你,绝对有戏</title>
  <style>

  </style>
</head>
<body>

  <!-------------------------------- 首页轮播图 -------------------------------->
  <div id="main-slides" class="main-carousel">
    <div class="swiper-container">
      <div class="swiper-wrapper">
      </div>
    </div>
    <div class="pagination"></div>
  </div>

  <!-------------------------------- 热门剧组 -------------------------------->
  <div id="hot" class="container">
    <div class="row">
      <div class="sec-caption col-xs-12">
        <p>热门剧组</p>
        <div class="padding"></div>
      </div>
    </div>
    <div id="img-tba"></div>
  </div> <!-- #hot -->


  <!-------------------------------- 职业通道 -------------------------------->
  <div id="career" class="container">
    <div class="row">
      <div class="sec-caption col-xs-12">
        <p>职业通道</p>
        <div class="padding"></div>
      </div>
    </div>
    <div id="path" class="row">

      <div id="ct-1" class="thumb-wrap col-xs-3 col-sm-2">
        <div class="career-thumb">
          <img src="./img/icon/career-signup.png" alt="signup">
        </div>
        <p>初选报名</p>
      </div>

      <div class="arrow-right-red col-xs-1 col-sm-1"></div>
      <div id="ct-2" class="thumb-wrap col-xs-3 col-sm-2">
        <div class="career-thumb ">
          <img src="./img/icon/career-training.png" alt="training">
        </div>
        <p>初选集训</p>
      </div>

      <div class="arrow-right-red col-xs-1 col-sm-1"></div>
      <div id="ct-3" class="thumb-wrap col-xs-3 col-sm-2">
        <div class="career-thumb ">
          <img src="./img/icon/career-final-training.png" alt="final training">
        </div>
        <p>终选集训</p>
      </div>

      <div class="arrow-right-red col-xs-1 col-xs-offset-1 col-sm-1 col-sm-offset-0"></div>
      <div id="ct-4" class="thumb-wrap col-xs-3 col-sm-2">
        <div class="career-thumb ">
          <img src="./img/icon/career-telant.png" alt="telant">
        </div>
        <p>真人秀、网综</p>
      </div>
      <div class="arrow-right-red col-xs-1 col-sm-1"></div>
      <div id="ct-5" class="thumb-wrap col-xs-3 col-sm-2">
        <div class="career-thumb ">
          <img src="./img/icon/career-join.png" alt="join">
        </div>
        <p>定选进组</p>
      </div>
    </div>
  </div>

  <!-------------------------------- 合作机构 -------------------------------->
  <div id="partner-orgs" class="container">
    <div class="row">
      <div class="sec-caption col-xs-12">
        <p>合作机构</p>
        <div class="padding"></div>
      </div>
    </div>
    <div id="orgs" class="row"></div>
  </div> <!-- #partner-orgs -->


  <script src="./plugin/jquery/1.12.4/jquery.min.js"></script>
  <script src="./plugin/swiper.js/2.7.6/js/idangerous.swiper.min.js"></script>
  <script src="./plugin/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="./js/acdors.js"></script>
  <script>
    "use strict";

    $(function () {
      //创建页面公共组件
      createCommonComponents(1);

      // 请求首页大轮播图数据
      ajaxGet({
        url: domainUrl + 'web/banner',
        data:{banner_area: 1},
        success: function(data){
          getBannerSlides(data, '#main-slides');
        } // success
      }); // ajaxGet()

      // 请求热门剧组和合作机构数据
      ajaxGet({
        url: domainUrl + 'web/indexs',
        success: function (data) {
          data = data.data;

          // 请求热门剧组数据
          if(data.isnull) { //后台没有上传热门剧组数据，展示"敬请期待"图片
            showTBA('#hot');
          } else
          { //请求到了热门剧组数据

            // 热门剧组 - 剧组图片与简单剧组信息,不带查看详情链接
            $('#hot').append(buildIntroBlk({crewinfo: data.crewinfo, seeMore: false}));

            // if(data.actor[0].information != "") {
            // if(data.actor.length != 0){
            if(data.actor.length != 0 && data.actor[0].information != "" ) {


              /* ================================
                  热门剧组 - 明星轮播图
                 ================================ */
              var length = data.actor.length;

              // 明星图片轮播图
              var $hotSlideWrapper = '<div id="hot-slides" class="intro-carousel">' +
                  '<div class="carousel-wrapper">' +
                    '<a href="#" class="arrow-left"></a>' +
                    '<a href="#" class="arrow-right"></a>' +
                    '<div class="swiper-container">' +
                      '<div class="swiper-wrapper">' +
                      '</div>' +
                    '</div>' +
                  '</div>' +
                '</div>';
              $('#hot').append($hotSlideWrapper);
              for(var i=0; i<length; ++i ) {
                var $actorSlide = '<div class="swiper-slide">' +
                    '<img src="' + ossUrl + data.actor[i].avatar + '" alt="明星轮播图">' +
                  '</div>';
                $('#hot-slides .swiper-wrapper').append($actorSlide);
              }

              // 明星介绍轮播文本
              var $hotInfoSlideWrapper = '<div id="hot-info-slides" class="intro-text-carousel">' +
                  '<div class="swiper-container">' +
                    '<div class="swiper-wrapper">' +
                    '</div>' +
                  '</div>' +
                '</div>';
              $('#hot').append($hotInfoSlideWrapper);
              for(var i=0; i<length; ++i) {
                // var gender = data.actor[i]
                var $actorInfoSlide = '<div class="swiper-slide">' +
                  '<table class="profile-info">' +
                    '<thead>' +
                      '<tr><th colspan="2"><h3>' + data.actor[i].name + '</h3></th></tr>' +
                    '</thead>' +
                    '<tbody>' +
                      '<tr>' +
                        '<th>饰演：</th>' +
                        '<td>' + data.actor[i].role + '</td>' +
                      '</tr>' +
                      '<tr>' +
                        '<th>作品：</th>' +
                        '<td>' + data.actor[i].experiment + '</td>' +
                      '</tr>' +
                      '<tr>' +
                        '<th>简介：</th>' +
                        '<td>' + data.actor[i].information + '</td>' +
                      '</tr>' +
                    '</tbody>' +
                  '</table>' +
                '</div>';
                $('#hot-info-slides .swiper-wrapper').append($actorInfoSlide);
              } // for

              // 明星图片swiperjs配置
              var hotSlides = $('#hot-slides .swiper-container').swiper({
                // loop: true,
                autoplay: 6000,
                grabCursor: true,
                slidesPerView: 3,
                autoplayDisableOnInteraction: true,
                centeredSlides: true,
                onSlideChangeStart: function () {
                  updateHotInfo(hotSlides.activeIndex);
                }
              });
              $('#hot-slides .arrow-left').on('click', function (e) {
                e.preventDefault();
                hotSlides.swipePrev();
              });
              $('#hot-slides .arrow-right').on('click', function (e) {
                e.preventDefault();
                hotSlides.swipeNext();
              });

              // 明星介绍轮播文本 swiperjs 配置
              var hotInfoSlides = $('#hot-info-slides .swiper-container').swiper({
                autoplay: 6000,
                slidesPerView: 1,
                centeredSlides: true,
                autoplayDisableOnInteraction: true,
                grabCursor: true,
                onSlideChangeStart: function () {
                  hotSlides.swipeTo(hotInfoSlides.activeIndex, 400, false);
                }
              });

              function updateHotInfo(index) {
                hotInfoSlides.swipeTo(index, 400, false);
              }

            } // if(data.actor[0].information != "")

          } // else 请求到了热门剧组数据

          // 请求合作机构数据
          var orgInfo = data.organinfo;

          for(var i=0, length=orgInfo.length<4 ? orgInfo.length : 3; i< length; ++i) { //最多展示四个机构,暂时先展示三个

            // 根据返回的机构数量偏移图标，达到居中效果，最多一行四个
            var $introThumb = '<a class="';
            if(i == 0) {
              switch (length) {
                case 1:
                  $introThumb += 'col-xs-4 col-xs-offset-4" ';
                  break;
                case 2:
                  $introThumb += 'col-xs-4 col-xs-offset-2" ';
                  break;
                case 3: 
                  $introThumb += 'col-xs-4" ';
                  break;
                default:
                  $introThumb += 'col-xs-3" '; //默认一行四个机构
                  break;
              }
            } else {
              switch (length) {
                case 1:
                case 2:
                case 3:
                  $introThumb += 'col-xs-4';
                  break;
                default: 
                  $introThumb += 'col-xs-3';
                  break;
              }
              $introThumb += '" ';
            }

            $introThumb += 'href=./html/partner-info.html?id=' + encodeURI(orgInfo[i].organ[0].id) + '>' +
                '<div class="intro-thumb">' +
                  '<div class="intro-thumb-img">' +
                    '<img class="img-responsive" src="' + ossUrl + orgInfo[i].organ[0].organ_picurl + '" alt="合作机构">' +
                  '</div>' +
                  '<p>' + orgInfo[i].organ[0].organ_name + '</p>' +
                '</div>' +
              '</a>';
            $('#partner-orgs #orgs').append($introThumb);
          }

        } // success: function()
      }); // $.ajax 请求热门剧组数据

    });
  </script>

</body>
</html>
